# Посібник з тестування смарт-контрактів для постачальників капіталу в мережах Ethereum Sepolia та Arbitrum Sepolia

## Вступ
Для тестування смарт-контрактів для постачальників капіталу в мережах Ethereum Sepolia та Arbitrum Sepolia, слід пройти кілька основних кроків:
1) Отримання SepoliaETH
2) Отримання stETH в мережі Ethereum Sepolia
3) Депозит stETH в контракт розподілу нагород в мережі Ethereum Sepolia
4) Отримання нагород у токені MOR в мережі Arbitrum Sepolia за допомогою моста Layer Zero


## Адреси смарт контрактів
Ethereum Sepolia 
- Контракт розподілу нагород: [0x0d9e3455d964029796e4b2b921ee27871125c21d](https://sepolia.etherscan.io/address/0x0d9e3455d964029796e4b2b921ee27871125c21d#code) 
- Контракт токену stETH: [0xe6D01D086a844a61641C75f1BCA572e7aa70e154](https://sepolia.etherscan.io/token/0xe6D01D086a844a61641C75f1BCA572e7aa70e154)
  
Arbitrum Sepolia 
- Контракт токену MOR: [0xe6d01d086a844a61641c75f1bca572e7aa70e154](https://sepolia.arbiscan.io/address/0xe6d01d086a844a61641c75f1bca572e7aa70e154#code)


## Як отримати Sepolia ETH?
- Спочатку нам необхідно мати встановлений Metamask або інший гаманець web3. Потрібно перейти до налаштувань мережі, які за замовчуванням зазвичай встановлені на Ethereum, а потім вибрати тестову мережу Sepolia.
- Наступний крок - це депозит SepoliaETH, для цього ви можете використовувати веб-сайти кранів, такі як https://sepolia-faucet.pk910.de/# або https://sepoliafaucet.com/.
- Існує безліч інших кранів, які можна легко знайти, але зазвичай для їх використання потрібно, щоб ваш адрес був активний в основній мережі Ethereum.

## Як отримати stETH?
Оскільки тестовий токен stETH офіційно не розгорнутий в мережі Sepolia, ми будемо використовувати копію цього токена з необхідними для тестування основними функціями. 
Для цього потрібно перейти до контракту [stETH](https://sepolia.etherscan.io/address/0xe6D01D086a844a61641C75f1BCA572e7aa70e154#writeContract) і відкрити вкладку "Contract", а потім натиснути на "Write Contract". 
Не забудьте підключити свій гаманець, в якому повинен бути достатній баланс нативного токена для оплати комісії.

![stETHContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/stETH-580x648.png)

Після цього потрібно вибрати функцію `mint()`, за допомогою якої ми зможемо викарбувати необхідну кількість stETH.  
В якості параметрів необхідно вказати:
- `account_`: адреса, на яку будуть зараховані токени;
- `amount_`: кількість токенів в WEI, замість ETH. Для конвертації ви можете використовувати калькулятор за [цим посиланням](https://eth-converter.com). Наприклад, якщо вам потрібно 0,01 stETH, то ця сума буде дорівнювати 10000000000000000 WEI. 
На прикладі вище, було викарбувано 100 stETH (відображення в WEI) на адресу 0xa4DB...2259.

Після виконання усіх дій натисніть на кнопку "Write" та підтвердіть транзакцію в гаманці.


## Як перевірити баланс stETH?
Необхідно перейти до контракту [stETH](https://sepolia.etherscan.io/address/0xe6D01D086a844a61641C75f1BCA572e7aa70e154#readContract), перейти до вкладки “Contract”, потім “Read Contract”. 
Не забудьте підключити свій гаманець, в якому повинен бути достатній баланс нативного токена для оплати комісії.

![stETHContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/check-stETH.png)

Перейдіть до функції `balanceOf()` та у якості параметру, в полі `account_`, вкажіть вашу адресу та натисніть на кнопку "Query". У результаті ви отримаєте значення в WEI, що показує кількість stETH на вашій адресі. На прикладі вище, у адреси 0xa4DB...2259 є 1000 stETH, відображені в WEI.

Ще один спосіб перевірити баланс - це додавання токена до вашого web3 гаманця. Як це зробити у гаманці Metamask, ви можете дізнатися з [цього посібника](https://support.metamask.io/hc/en-us/articles/360015489031-How-to-display-tokens-in-MetaMask#h_01FWH492CHY60HWPC28RW0872H). В якості адреси токена stETH введіть `0xe6D01D086a844a61641C75f1BCA572e7aa70e154`.


## Як додати stETH до контракту розподілення нагород?
Перейдіть до контракту [stETH](https://sepolia.etherscan.io/address/0xe6D01D086a844a61641C75f1BCA572e7aa70e154#writeContract), спочатку відкрийте вкладку “Contract”, потім вкладку “Write Contract”. 
Не забудьте підключити свій гаманець, в якому повинен бути достатній баланс нативного токена для оплати комісії.

![stETHContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/stethapproval.png)

Перед внесенням коштів, нам необхідно надати дозвіл контракту на відправлення stETH з вашого гаманця. Для цього ми використовуватимемо функцію approve().
В якості параметрів вкажіть:
- spender: адреса контракту розподілу нагород - 0x0d9e3455d964029796e4b2b921ee27871125c21d;
- amount: суму токенів, на які ви даєте дозвіл, відображену в WEI. Сума повинна дорівнювати або бути більшою за ту, яку ви плануєте внести в контракт. Для зручності обчислень ви можете скористатися калькулятором за цим посиланням.

Після виконання усіх дій натисніть на кнопку "Write" та підтвердіть транзакцію в гаманці.

Далі необхідно відкрити контракт [розподілення нагород](https://sepolia.etherscan.io/address/0x0d9e3455d964029796e4b2b921ee27871125c21d#writeProxyContract), та відкрити вкладку “Contract”, а потім “Write as Proxy”. 
Не забудьте підключити свій гаманець, в якому повинен бути достатній баланс нативного токена для оплати комісії.

![DistributionContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/stake.png)

Необхідна функція для внесення stETH в контракт називається `stake()`.  
В якості параметрів вкажіть:
- `poolId_`: ідентифікатор групи (пула); для тестування створено пул з номером "0";
- `amount_`: суму токенів в WEI (10 stETH у цьому прикладі).

Після виконання усіх дій натисніть на кнопку "Write" та підтвердіть транзакцію в гаманці.


## Як отримати інформацію про суму депозиту та суму нагород?
Данная информация доступна через взаимодействие с контрактом [распределения наград](https://sepolia.etherscan.io/address/0x0d9e3455d964029796e4b2b921ee27871125c21d#readProxyContract). Откройте вкладку “Contract”, а затем “Read as Proxy”. Не забудьте подключить свой кошелек, в котором должен быть достаточный баланс нативного токена для оплаты комиссии.

Для нашей цели, мы будем использовать две функции. Первая показывает количество токенов MOR полученных в качестве награды за депозит stETH в контракт. Награды начисляются каждую секунду.

![DistributionContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/rewards.png)

Выберите функцию `getCurrentUserReward` и в качестве параметров укажите: 
- `poolId_` номер пула, в нашем случае это "0";
- `user_` адрес вашего кошелька.  
Для отображения информации, нажмите на кнопку "Query".

Как результат, вы увидите значение показывающее количество начисленных токенов в качестве награды. Отображение токенов в WEI.

Вторая функция `usersData()` покажет сумму вашего депозита. Параметры аналогичны первой функции.

![DistributionContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/stakedamount.png)


## Как снять stETH с контракта?
Необходимо перейти к контракту [распределения наград](https://sepolia.etherscan.io/address/0x0d9e3455d964029796e4b2b921ee27871125c21d#writeProxyContract), вкладку “Contract”, а затем вкладку “Write as Proxy”. Не забудьте подключить свой кошелек, в котором должен быть достаточный баланс нативного токена для оплаты комиссии.

![DistributionContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/withdraw.png)

Выберите функцию `withdraw()` и укажите в качестве параметров:
- `poolId_`: номер пула, в нашем случае это "0";
- `amount_`: сумму токенов указанную в WEI.

После выполнения всех действий нажмите на кнопку “Write” и подтвердите транзакцию в кошельке.


## Как получить награды?
Для этого нам снова необходим контракт [распределения наград](https://sepolia.etherscan.io/address/0x0d9e3455d964029796e4b2b921ee27871125c21d#writeProxyContract). Нужная функция находится во вкладке “Contract” и “Write as Proxy”. Не забудьте подключить свой кошелек, в котором должен быть достаточный баланс нативного токена для оплаты комиссии.

![DistributionContract](https://github.com/antonbosss/fantastic-bassoon/blob/SepoliaTestnetGuide/claim.png)

Чеканка и получение токенов MOR осуществляется в сети Arbitrum Sepolia, поэтому нам необходимо воспользоваться мостом Layer Zero. 

Всё что необходимо сделать, это использовать функцию `claim()` и указать следующие параметры:
- `claim`: тут указывается сумма нативных токенов в сети-отправителе, которые будут использованы в качестве комиссии за чеканку токенов в сети Arbitrum Sepolia. Вы можете указать бОльшую сумму, разница будет вам возвращена;
- `poolId_`: номер пула, в нашем случае это "0";
- `user_`: адрес в сети Arbitrum Sepolia на который будут зачислены токены.
  
После выполнения всех действий нажмите на кнопку “Write” и подтвердите транзакцию в кошельке.

Поздравление, ваша награда в виде токенов MOR теперь в сети Arbitrum Sepolia. Вы можете импортировать адрес токена `0xe6D01D086a844a61641C75f1BCA572e7aa70e154` в ваш кошелек Мetamask используя это [руководство](https://support.metamask.io/hc/en-us/articles/360015489031-How-to-display-tokens-in-MetaMask#h_01FWH492CHY60HWPC28RW0872H) или проверить баланс через смарт контракт по примеру с токеном stETH.


## Как получить ETH в сети Arbitrum Sepolia?
- Для начала нам необходим установленный Metamask или другой кошелек web3. Затем необходимо добавить сеть Arbitrum Sepolia вручную или использовать сайт [Chainlist](https://chainlist.org/?testnets=true&search=arbitrum+sepolia) где нажать на кнопку “Add to Metamask”.
- Следующий шаг это депозит Arbitrum Sepolia ETH, для этого вы можете использовать веб-сайты краны, такие как ttps://faucet.quicknode.com/arbitrum/sepolia или https://faucet.triangleplatform.com/arbitrum/sepolia

**Если вам интересно более детальное руководство, с описанием функций контрактов, вы можете его найти по [ссылке](https://docs.google.com/document/d/1DbNx-CBpHjFUvIhbKHJSOshCKNTWlng7SeLzzn95AKY/edit)** 
